<html>
<head>
    <title>Admin Manage Student Enrollemnt</title>
    <link rel = "stylesheet" href = "{{url_for('static', filename='styles.css')}}">
</head>

<body>
    <h1>Welcome, admin {{admin_id}} !</h1>
    <h1>Admin Management - Year: {{year}} Term: {{term}}</h1>

    
    <div>
        <a href="{{url_for('admin_manage', year = year, term = term)}}">Back to Admin Dashboard</a>
    </div>

    <div class = "container">

        {% if student_error_message %}
            <div style="color: red; margin-top: 20px;">
                <strong>{{student_error_message}}</strong>
            </div>
        {% elif student_message %}
            <div style="color: green; margin-top: 20px;">
                <strong>{{student_message}}</strong>
            </div>
        {% endif %} 
        

        <div class = "card">
            <div class = "card-header">
                <h2 style="margin-top: 20px;">Student Management</h2>
            </div>
            
            <div class = "card-body">
                <h3 style = "color: rgb(51, 0, 255); margin-top: 20px;" >Student Enrollment</h3>
                <form method = "POST" action="{{url_for('admin_manage_student', year = year, term = term)}}">
                    <table class = 'table'>
                        <thead>
                            <tr>
                                <th>Student ID</th>
                                <th>Student Name</th>
                                <th>Student Email</th>
                                <th>Major</th>
                                <th>Academic Level</th>
                                <th>GPA</th>
                                <th>Course ID</th>
                                <th>Section Number</th>
                                <th>Grade</th>
                            </tr>
                        </thead>
                        
                        <tbody>
                            {% for (sid, cid, sec_num), enroll in enrolls.items() %}
                                <tr>
                                    <td>{{sid}}</td>
                                    <td>{{enroll['sname']}}</td>
                                    <td>{{enroll['semail']}}</td>
                                    <td>{{enroll['major']}}</td>
                                    <td>{{enroll['academic_level']}}</td>
                                    <td>{{enroll['gpa']}}</td>
                                    <td>{{cid}}</td>
                                    <td>{{sec_num}}</td>
                                    <td>{{enroll['grade']}}</td>
                                    <td><button class = "delete_btn" name = "delete_{{sid}}_{{cid}}_{{sec_num}}" value = "{{sid}}_{{cid}}_{{sec_num}}">Delete</button></td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </form>        
     
                <hr>
                         
                <h3 style = "color: rgb(51, 0, 255); margin-top: 20px;" >Student Waitlist</h3>
                <form method = "POST" action="{{url_for('admin_manage_student', year = year, term = term)}}">
                    <table class = "table">
                        <thead>
                            <tr>
                                <th>Student ID</th>
                                <th>Student Name</th>
                                <th>Student Email</th>
                                <th>Major</th>
                                <th>Academic Level</th>
                                <th>GPA</th>
                                <th>Course ID</th>
                                <th>Section Number</th>
                                <th>Join Date</th>
                            </tr>
                        </thead>

                        <tbody>
                            {% for (sid, cid, sec_num), waitlist in waitlists.items() %}
                                <tr>
                                    <td>{{sid}}</td>
                                    <td>{{waitlist['sname']}}</td>
                                    <td>{{waitlist['semail']}}</td>
                                    <td>{{waitlist['major']}}</td>
                                    <td>{{waitlist['academic_level']}}</td>
                                    <td>{{waitlist['gpa']}}</td>
                                    <td>{{cid}}</td>
                                    <td>{{sec_num}}</td>
                                    <td>{{waitlist['join_date']}}</td>
                                    <td>
                                        <button class="update_btn" name = "update_waitlist_{{sid}}_{{cid}}_{{sec_num}}" value="{{sid}}_{{cid}}_{{sec_num}}">Enroll</button>
                                        <button class="delete_btn" name = "delete_waitlist_{{sid}}_{{cid}}_{{sec_num}}" value="{{sid}}_{{cid}}_{{sec_num}}">Delete</button>
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </form>


                
            </div>

        </div>

    </div>

    
</body>
</html>
